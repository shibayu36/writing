---
Title: gitを使ってみたまとめ(３)
Category:
- git
Date: 2010-02-21T00:13:47+09:00
URL: https://blog.shibayu36.org/entry/20100221/1266678827
EditURL: https://blog.hatena.ne.jp/shiba_yu36/shibayu36.hatenablog.com/atom/entry/12704591929888039284
---


前回はadd、commitの詳細や、変更点の確認、ファイル管理についてでした。今回はブランチの使い方についてです。

<hr width="100%" size="2" />１．ブランチの作成
　新しくブランチを作成するには、次のコマンド。
<blockquote>$git branch (ブランチ名)
$git checkout -b (ブランチ名) (分岐させたいブランチ名)
$git branch (ブランチ名) (タグ名)</blockquote>１番目は、現在のブランチから、(ブランチ名)の新しいブランチを作成する。２番目は(分岐させたいブランチ名)から(ブランチ名)を作成し、作成したブランチをそのままチェックアウトできる。３番目は作成したタグからブランチを作成する。

　現在作成されているブランチを表示するには
<blockquote>$git branch</blockquote>と打ち込む。現在作成されているブランチ名が一覧で表示され、チェックアウトしているブランチにはアスタリスクがつく。

　チェックアウトは
<blockquote>$git checkout (ブランチ名)</blockquote>
<hr width="100%" size="2" />２．ブランチ間での変更のマージ
　ブランチのマージには直接マージ、圧縮コミット、チェリーピックの３種類がある。直接マージはすべてのコミットをそのままマージする、圧縮コミットはコミットを一つにまとめてマージする、チェリーピックはいくつかのコミットを指定してマージすることだ。

　直接マージはマージさせたいブランチをチェックアウトさせた状態で、
<blockquote>$git merge (マージしたいブランチ名)</blockquote>を実行することで、すべてのコミットがそのままマージされる。

　圧縮コミットは
<blockquote>$git merge --squash (マージしたいブランチ名)
$git commit -m "..."</blockquote>を実行することで、行える。１番目のコマンドで、コミットを一つにまとめ、ステージに乗せる。２番目のコマンドで一つにまとめたものにメッセージをつけてコミットする。

　チェリーピックは、
<blockquote>$git cherry-pick (マージしたいコミット名、つまりハッシュ値)</blockquote>$git cherry-pick -n (マージしたいコミット名)
で行える。１番目のコマンドは、指定したコミットをそのままマージする。２番目のコマンドは指定したコミットを一旦ステージに乗せる。こうすることで、いくつかのコミットをステージに乗せることができ、それを一つのコミットとしてマージできる。もちろんgit commitを行うことが必要だ。

<hr width="100%" size="2" />３．競合への対処
　マージをしたときに競合を起こすことがある。例えば同じ行に対して変更を行ったときだ。マージするときにCONFLICTという表示がされる。この時、競合したファイルを編集すると、
<blockquote>&lt;&lt;&lt;&lt;&lt;HEAD
test1
=====
test2
>>>>>TEST</blockquote>というような表示が出来ている。この部分が、競合したことを示す印だ。上の場合、HEAD（現在のブランチにおける最新のコミット)とTESTブランチのコミットが競合していて、前者ではtest1、後者ではtest2という書き込みが競合していることを示す。このような時はこの部分を人手で書き換えてやり、コミットを行えばよい。また競合を解消するためのツールもある。git mergetoolコマンドを使えば、それを起動することも出来る。

<hr width="100%" size="2" />４．ブランチの削除
　ブランチの削除は以下のコマンド
<blockquote>$git branch -d (削除したいブランチ名)</blockquote>これが成功するのは、現在チェックアウトしているブランチに削除したいブランチがきちんとマージされている場合に限る。強制的に削除するには-Dオプションをつければよい。

<hr width="100%" size="2" />５．ブランチの名前変更
　名前変更は次のコマンド。
<blockquote>$git branch -m (変更前のブランチ名）　(変更後のブランチ名)</blockquote>
