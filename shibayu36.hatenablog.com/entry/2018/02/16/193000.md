---
Title: Mackerelの思想や出来ることを知る - Mackerelサーバ監視実践入門を読んだ
Category:
- tech
- book
Date: 2018-02-16T19:30:00+09:00
URL: https://blog.shibayu36.org/entry/2018/02/16/193000
EditURL: https://blog.hatena.ne.jp/shiba_yu36/shibayu36.hatenablog.com/atom/entry/17391345971616793340
---

最近Mackerelを触ることが多く、Mackerelで何が出来るのかを知りたいと思い、Mackerelサーバ監視実践入門を読んだ。

[asin:4774192139:detail]

この本では、Mackerelにはどのような機能があるのかを広く紹介している。また、実際に使っているユーザの事例もいくつか知ることができる。そのため、Mackerelでサーバを監視したい！と思っている人や、監視をし始めたけどさらにどういうことが出来るのか知りたいと思っている人には非常に参考になりそう。僕も、さらにどういうことが出来るのか知りたいという気持ちだったので、非常に参考になった。

個人的には、この本の内容から、Mackerelはサーバ監視サービスとしてだけではなくて、サーバ管理ツールとして使って欲しいという思いが伝わってきたのが良かった。ただ監視するだけではなくて、ホスト情報の統合管理場所として使い、例えばどのサーバにデプロイするかなどの判断するなどに使うという感じ。このように使うことで、日々サーバの台数が変わるような動的インフラストラクチャの世界でも簡単にホスト一覧やホスト情報を管理することができる。

さて、この本を読んだことで「何ができるか」については知れたものの、ではそれらの機能を使って「どう使うか」というのはまだちゃんと分かっていないと感じた。ただそのへんはまずは自分でいろいろと使ってみるところから始めたいと思った。

* 読書ノート
- ロールグラフとは、同じロールに所属するホストが1つのグラフにまとめられたもの 651
- PagerDuty連携を利用すると、通知先を時間で変更するなど、柔軟なアラート通知ができる 1575
- メタデータプラグインはホストのメタデータを登録するプラグイン 1742
- checkプラグインを作るときは、github.com/mackerelio/checkersを使うと便利 1979
- MackerelはAPIを用いて、「ホスト情報を一元管理する」という思想を推奨している 2531
- インテグレーションで対応していないクラウド製品との連携は、 2714
-- mkrでホストを作成
-- mkr throwで作成したホストに投稿
-- cronで定期的に送信
-- という方法でできる
- ホストステータスの自動変更や自動退役 3127
-- mackerel-agentの[host_status]設定でon_start/on_stopを設定することで、ステータスを変更可能
- mkr pullなどで取得したデータとリモートのデータがずれてないかをCIする 3352
- 式を使って柔軟なグラフを書く 3371
- GMOペパボでのMackerel活用事例 3759
-- デプロイ先のホスト一覧をmackerel経由で取得
-- hostsファイルの自動生成
-- 退役忘れホストの自動検知
