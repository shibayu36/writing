---
Title: MacでYouTube用にclusterの録画を撮る
Category:
- tech
- cluster
Date: 2024-12-21T16:08:11+09:00
URL: https://blog.shibayu36.org/entry/2024/12/21/160811
EditURL: https://blog.hatena.ne.jp/shiba_yu36/shibayu36.hatenablog.com/atom/entry/6802418398313397055
---

下記のイベントで、MacでYouTubeアーカイブ用の録画をしたので、どのように設定したかをまとめておく。

[https://cluster.mu/e/aa140a07-8275-4ea7-b65b-f6a555ec2fe7:embed:cite]

### 最終系
以下のように録画したい。

- YouTubeのアスペクト比である16:9となるように
- clusterのアプリケーションのヘッダー部分は映さない
- clusterの音声と自分の音声の両方を録画

[f:id:shiba_yu36:20241221155600p:plain]

### 手順概要
- OBSの基本設定
- OBSソースの設定
- clusterウインドウを適したサイズに変更
- OBS側でヘッダー部分のクロップ

### OBSの基本設定
OBS > Preferencesより、YouTubeのアスペクト比に設定し、FPSも60FPSに上げておく。録画フォーマットはmkvにしておいた方がPCが落ちてしまった時なども復旧しやすい。

[f:id:shiba_yu36:20241221151613p:plain]

### OBSソースの設定
macOS スクリーンキャプチャ、macOS 音声キャプチャ、音声入力キャプチャの3つをソースに追加する。

- macOS スクリーンキャプチャ: clusterの画面収録用。プロパティでウィンドウキャプチャを選択し、clusterを選択
    - [f:id:shiba_yu36:20241221160539p:plain:h200]
- macOS 音声キャプチャ: clusterの音声収録用。プロパティでアプリケーション音声キャプチャを選択肢、clusterを選択
    - [f:id:shiba_yu36:20241221160557p:plain:h150]
- 音声入力キャプチャ: 自分のマイク音声収録用。

### clusterウインドウを適したサイズに変更
[https://blog.shibayu36.org/entry/2024/12/12/092828:title=Macでコマンド一発で特定のアプリケーションのウインドウを指定サイズにする]で紹介したように、ターミナルもしくはショートカットアプリを使うことでclusterのウインドウを指定サイズに変更できる。

clusterのウインドウのヘッダーサイズを測ってみると28pxということが分かったので、1280x(720+28)のサイズに変更しておくと、ヘッダークロップした後のサイズが綺麗に16:9になる。上の記事で紹介したコマンドを使うならこういう感じ。

```
resize-window cluster 1280 $((720+28))
```

### OBS側でヘッダー部分のクロップ
今の状態だとまだOBS側でclusterのウインドウヘッダーが表示された状態になってしまっている。そこでmacOS スクリーンキャプチャのクロップ機能を使ってヘッダー部分を取り除く。

- 右クリック > 変換 > 変換の編集
    - [f:id:shiba_yu36:20241221155215p:plain:h400]
- Retinaディスプレイ系の問題で解像度が2倍になっているので、大きさを1280x748に。クロップ > 上で56pxを指定（56px = ヘッダー 28px * 2）
    - [f:id:shiba_yu36:20241221155401p:plain:h300]
- 右クリック > 変換 > 画面を引き伸ばして置くで変化がないことを確認し、サイズ合わせがうまくいっていることを確認
    - [f:id:shiba_yu36:20241221155446p:plain:h300]

### あとは録画して、終わった後に再多重化
ここまできたら設定は完了しているので録画するだけ。録画前のチェック項目としては以下を見ておくと良い。

- スクリーンキャプチャが動いているか
- macOS音声キャプチャ、音声入力キャプチャが音声を取れているか、音声バランスがあっているか

録画を終了するとmkvファイルができているので、Macで確認するためにmp4形式に変換する。これはファイル > 録画の再多重化をすれば変換できる。

### まとめ
今回はMacを使っているときに、clusterでヘッダーは取り除いた上でYouTube用のアスペクト比16:9で、自分のマイク音声とclusterの音声を取り込んだ状態で録画する設定をまとめてみた。clusterで録画/配信する時に参考になると嬉しい。
